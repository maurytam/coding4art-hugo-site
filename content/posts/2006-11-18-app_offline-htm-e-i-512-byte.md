---
title: App_offline.htm e i 512 byte
author: mtammacco
type: post
date: 2006-11-18T15:09:00+00:00
url: /archive/2006/11/18/app_offline-htm-e-i-512-byte.aspx
categories:
  - .NET Framework 1.0 / 1.1 / 2.0

---
Nonostante qualche commento negativo letto in Rete, a me il comportamento di ASP .NET 2.0 in presenza del file app\_offline.htm nella root della web application mi sembra abbastanza comodo e funzionale. Ricordo che questo file è utile quando si è in fase di manutenzione della propria applicazione web e si vuol fornire un messaggio &#8220;user friendly&#8221; agli utenti informandoli che l&#8217;applicazione non è momentaneamente disponibile, o qualsiasi cosa si voglia. In presenza di un file con tale nome infatti, l&#8217;engine di ASP .NET 2.0 effettua lo shutdown dell&#8217;applicazione, scarica l&#8217;appDomain e risponde ad ogni richiesta dei files normalmente gestiti dallo stesso engine con il file app\_offline.htm appunto, permettendo in questo modo di non far incorrerere in errori eventuali richieste che avvengono mentre il sito è in manutenzione. Basterà poi rinominare, cancellare o spostare il suddetto file affinchè le pagine richieste siano elaborate nel modo consueto. Comodo no ? Ma cè un problema, aggirabile, ma pur sempre un problema. Internet Explorer 6.0 ha una impostazione chiamata &#8220;Mostra messaggi di errore HTTP brevi&#8221;. Questa impostazione di default è vera, e significa che qualsiasi messaggio HTTP diverso da 200 il cui contenuto non eccede il 512 byte, verrà mostrato da IE in modo cosiddetto &#8220;user frendly&#8221; per l&#8217;utente, fornendo un messaggio generico di errore che non lascia capire nulla circa la vera causa dell&#8217;errore. Qui nasce il problema: se il file app\_offline.htm è più piccolo di 512 byte non è correttamente visualizzato ma al suo posto viene ritornato un errore HTTP (quindi un codice diverso da 200) che, in presenza della impostazione &#8220;Mostra messaggi HTTP brevi&#8221; su &#8220;on&#8221; provoca un errore generico. Non capisco come un messaggio di errore generico possa essere ritenuto &#8220;user friendly&#8221; per l&#8217;utente. Per la mia esperienza non fa altro che disorientarlo ancor di più. La soluzione al problema è ovviamente creare il file app\_offline con una dimensione maggiore di 512 byte (oppure fare in modo che lo sia aggiungendo ad esempio commenti fittizi nel codice HTML), oppure disabilitare l&#8217;impostazione &#8220;mostra messaggi di errore http brevi&#8221;